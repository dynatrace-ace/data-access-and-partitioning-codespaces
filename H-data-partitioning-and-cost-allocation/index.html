
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../G-data-segmentation/">
      
      
        <link rel="next" href="../I-cleanup/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.42">
    
    
      
        <title>H. Data Partitioning & Cost Allocation - Dynatrace Data Access & Partitioning</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
  <!-- Add scripts that need to run before here -->
  
      
    
  <!-- Add scripts that need to run afterwards here -->
   <!-- TODO: BeforeGoLive: Replace Agentless RUM Snippet
    1. Create an agentless application in Dynatrace from with convention 'dynatrace-wwse/repositoryname'
    2. https://hci34192.apps.dynatrace.com/ui/apps/dynatrace.classic.deploy.agentless/#install/agentless;gtf=-2h;gf=all
    <script type="text/javascript" src="https://js-cdn.dynatrace.com/jstag/PLACEHOLDEr/REPLACE_WITH_YOUR_SNIPPET/1234abcd1234abcd_complete.js" crossorigin="anonymous"></script>
    -->
    <script type="text/javascript" src="https://js-cdn.dynatrace.com/jstag/1612cf70810/bf81393wlb/7c50bce5c0cc890f_complete.js" crossorigin="anonymous"></script>

    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#data-partitioning-and-cost-allocation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Dynatrace Data Access &amp; Partitioning" class="md-header__button md-logo" aria-label="Dynatrace Data Access & Partitioning" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Dynatrace Data Access & Partitioning
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              H. Data Partitioning & Cost Allocation
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/dynatrace-ace/data-access-and-partitioning-codespaces" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    View Code on GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Dynatrace Data Access &amp; Partitioning" class="md-nav__button md-logo" aria-label="Dynatrace Data Access & Partitioning" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Dynatrace Data Access & Partitioning
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/dynatrace-ace/data-access-and-partitioning-codespaces" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    View Code on GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    A. Before You Begin
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../B-deploy-codespace/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    B. Deploy Codespace
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../C-introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C. Lab Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../D-slice-and-dice/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    D. Slice & Dice
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../E-metadata-enrichment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    E. Metadata Enrichment
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../F-data-access/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    F. Data Access
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../G-data-segmentation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    G. Data Segmentation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    H. Data Partitioning & Cost Allocation
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    H. Data Partitioning & Cost Allocation
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#data-partitioning-and-cost-allocation" class="md-nav__link">
    <span class="md-ellipsis">
      Data Partitioning and Cost Allocation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data Partitioning and Cost Allocation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#learning-objectives" class="md-nav__link">
    <span class="md-ellipsis">
      🎯 Learning Objectives
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-partitioning-bucket-strategy-for-logs" class="md-nav__link">
    <span class="md-ellipsis">
      Data Partitioning – Bucket Strategy for Logs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data Partitioning – Bucket Strategy for Logs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-1-analyze-ingestion-volume" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 1: Analyze Ingestion Volume
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-2-design-bucket-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 2: Design Bucket Strategy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-3-connect-buckets-to-access-control" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 3: Connect Buckets to Access Control
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-4-cost-allocation" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 4: Cost Allocation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../I-cleanup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    I. Cleanup
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../J-learn-more/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    J. Learn More
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../K-develop/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    K. Develop
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#data-partitioning-and-cost-allocation" class="md-nav__link">
    <span class="md-ellipsis">
      Data Partitioning and Cost Allocation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data Partitioning and Cost Allocation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#learning-objectives" class="md-nav__link">
    <span class="md-ellipsis">
      🎯 Learning Objectives
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-partitioning-bucket-strategy-for-logs" class="md-nav__link">
    <span class="md-ellipsis">
      Data Partitioning – Bucket Strategy for Logs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Data Partitioning – Bucket Strategy for Logs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-1-analyze-ingestion-volume" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 1: Analyze Ingestion Volume
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-2-design-bucket-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 2: Design Bucket Strategy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-3-connect-buckets-to-access-control" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 3: Connect Buckets to Access Control
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-4-cost-allocation" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 4: Cost Allocation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>H. Data Partitioning & Cost Allocation</h1>

<h2 id="data-partitioning-and-cost-allocation">Data Partitioning and Cost Allocation<a class="headerlink" href="#data-partitioning-and-cost-allocation" title="Permanent link">#</a></h2>
<p>Since easytrade is growing fast and multiple teams are accessing logs and metrics across environments, performance and cost are becoming critical concerns.
To stay ahead, Easytrade engineers need to implement a bucket strategy to optimize log storage and query performance. At the same time, they’re introducing cost allocation tagging to track usage across teams and applications.
This lab will guide you through designing a log bucket strategy and applying cost allocation metadata to a VM — helping Easytrade scale smart, not just fast.</p>
<h3 id="learning-objectives">🎯 Learning Objectives<a class="headerlink" href="#learning-objectives" title="Permanent link">#</a></h3>
<ul>
<li>Understand how buckets impact data retention, query performance, and cost.</li>
<li>Design a log bucket strategy based on ingestion volume and dimensions.</li>
<li>Learn how to apply cost allocation metadata using <code>dt.security_context</code>, <code>dt.cost.product</code>, and <code>dt.cost.costcenter</code>.</li>
</ul>
<h3 id="data-partitioning-bucket-strategy-for-logs">Data Partitioning – Bucket Strategy for Logs<a class="headerlink" href="#data-partitioning-bucket-strategy-for-logs" title="Permanent link">#</a></h3>
<p>Why do buckets matter?</p>
<ul>
<li>Data Retention: Controls how long logs are stored - main use!</li>
<li>Query Performance: Targeted buckets reduce scan time.</li>
<li>Cost Efficiency: Less scan = lower DQL costs.</li>
</ul>
<p>You could technically rely on the default buckets, without creating custom ones. The advantage would be a reduced configuration management, but the drawback would be a decreased performance &amp; costs. That’s the trade-off when desiging your bucket strategy.</p>
<p>Keep that in mind especially for small accounts, you don’t want to overcomplicate the solution. But for Enterprise accounts, a bucket strategy is required.</p>
<p><img alt="" src="../img/content/ingest-volume-buckets.png" /></p>
<h4 id="examples">Examples<a class="headerlink" href="#examples" title="Permanent link">#</a></h4>
<p><strong>Small scale customer ( &lt; 2TB/day )</strong></p>
<p>If your customer has a low ingestion volume (e.g., less than 2 TB/day), they’ll likely operate within the default limit of 80 buckets per environment. In this case:</p>
<ul>
<li>Avoid creating too many buckets — especially at the team level.</li>
<li>Instead, consider using record-level permissions within a few shared buckets.</li>
<li>Focus on functional separation — split logs based on their purpose (e.g., infrastructure vs. application logs), rather than ownership.</li>
</ul>
<p>This approach keeps configuration simple and avoids unnecessary overhead.</p>
<p><strong>Large scale customer (250-1000 buckets)</strong></p>
<p>For enterprise customers with higher ingestion volumes and extended bucket limits:</p>
<ul>
<li>A multi-bucket strategy becomes essential.</li>
<li>Buckets should be designed to support:</li>
<li>Data retention policies</li>
<li>Query performance optimization</li>
<li>Cost control</li>
<li>Access control per team or business unit</li>
</ul>
<p>Use meaningful dimensions like <code>app</code>, <code>business_unit</code>, or <code>stage</code> to partition logs.</p>
<blockquote>
<p>💡 Remember: Custom buckets are primarily designed for data retention, but they also play a key role in access control and cost efficiency.</p>
</blockquote>
<h4 id="exercise-1-analyze-ingestion-volume">Exercise 1: Analyze Ingestion Volume<a class="headerlink" href="#exercise-1-analyze-ingestion-volume" title="Permanent link">#</a></h4>
<p>Use dimensions like app, stage, or team to estimate log volume.</p>
<p>Review the customer’s log ingestion volume per app. You can do that by fetching all logs for your k8s cluster and then applying any of the created segments that will lower the result size as well as improve the performance.</p>
<p><strong>Think about how you would approach a customer with this kind of scenario. How would you split the logs? Would your customer want a standardized bucket approach per team? Or do they work more in a "purpose" fashion where logs are stored in different buckets based on their use/purpose? Or even solely based on the amount of data stored?</strong></p>
<h4 id="exercise-2-design-bucket-strategy">Exercise 2: Design Bucket Strategy<a class="headerlink" href="#exercise-2-design-bucket-strategy" title="Permanent link">#</a></h4>
<p>Choose the right dimension to partition logs - in this case, we can go with the namespace name.</p>
<ol>
<li>Go to Settings &gt; Storage Management</li>
<li>Click on "+Bucket"</li>
<li>Create a new custom bucket for easytrade logs and choose your retention</li>
<li>Go to Settings &gt; Process and Contextualize &gt; Logs</li>
<li>Add a new dynamic routing rule with a route = <code>k8s.namespace.name == "easytrade"</code></li>
<li>Add a new pipeline and in the last stage of the pipeline, add the bucket asignment rule.</li>
<li>Fetch the logs again and check that your rule works.</li>
</ol>
<blockquote>
<p>Please note - this is not an official recommendation for every customer scenario. Handling large buckets based on a namespace in a customer environment of many k8s clusters is most likely not a good idea if you're trying to accomplish a scalable approach. Think of using k8s cluster level if needed.</p>
</blockquote>
<h4 id="exercise-3-connect-buckets-to-access-control">Exercise 3: Connect Buckets to Access Control<a class="headerlink" href="#exercise-3-connect-buckets-to-access-control" title="Permanent link">#</a></h4>
<p>Use IAM to restrict log access by bucket.</p>
<h4 id="exercise-4-cost-allocation">Exercise 4: Cost Allocation<a class="headerlink" href="#exercise-4-cost-allocation" title="Permanent link">#</a></h4>
<p>Dynatrace provides full-stack observability, which means cost allocation must account for:</p>
<ul>
<li>Host monitoring</li>
<li>Signals tied to the host (e.g., Kubernetes cluster metrics, Logs etc.)</li>
</ul>
<blockquote>
<p>This exercise focuses on configuring cost allocation for Full-Stack monitoring as well as for new Log Ingest &amp; Process cost allocation feature introduced in Dynatrace SaaS 1.324.</p>
</blockquote>
<p><strong>Cost Allocation Overview</strong>
<img alt="" src="../img/content/lab5-ex4-cost-allocation.png" /></p>
<p>Step-by-Step Instructions:</p>
<ol>
<li>To ensure only relevant entities are included in cost allocation follow the <a href="https://docs.dynatrace.com/docs/license/cost-allocation#cost-allocation-allowlist">official documentation</a> to configure the allow list.</li>
<li>Tagging hosts is essential for accurate cost attribution. You’ll <a href="https://docs.dynatrace.com/docs/license/cost-allocation#big-steps--auto--1--Configure-Cost-Allocation-on-the-host">configure host properties remotely on OneAgents</a>.</li>
<li>No manual configuration is needed for logs in this lab. Telemetry enrichment has already been set up and will automatically apply the necessary tagging for log ingest cost allocation for our <code>loginservice</code>.</li>
<li>There is a difference between something that is possible to be cross-charged and something that is officially available within our Cost Allocation feature. <code>Log Management - Ingest &amp; Process</code> is available as of <code>1.324</code> which means that the Cost Allocation attributes <code>dt.cost.costcenter</code> and <code>dt.cost.product</code> will be on all Log Ingest Billing Usage Events (fetch dt.system.events). Therefore, this is officially supported by our Cost Allocation feature and will show up in Account Management.</li>
<li><img alt="" src="../img/content/lab5-ex4-cost-allocation-log-ingest.png" /></li>
<li>To verify your configuration - go to <a href="https://guu84124.apps.dynatrace.com/ui/apps/dynatrace.launcher/">demo.live</a> &gt; Dashboards &gt; All Dashboards &gt; Download the dashboard "DPS Cost Allocation - Usage &amp; Costs v1.3". Upload it to your personal Dynatrace tenant. This dashboard will display cost allocation details based on your tagging and enrichment setup.</li>
</ol>
<div class="grid cards">
<ul>
<li><a href="cleanup.md">Let's continue<span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.22 19.03a.75.75 0 0 1 0-1.06L18.19 13H3.75a.75.75 0 0 1 0-1.5h14.44l-4.97-4.97a.749.749 0 0 1 .326-1.275.75.75 0 0 1 .734.215l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0"/></svg></span></a></li>
</ul>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy"], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  </body>
</html>